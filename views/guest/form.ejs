<%- layout("layouts/boilerplate.ejs") %>
<body>
    <div class="col-6 offset-3 mb-3">
        <h3>Book your stay at <%=hotel.name%></h3>
    <form action="/guest/<%=hotel._id%>" method="POST" class="needs-validation" novalidate>
        <div class="mt-3">
            <label for="" class="form-label">Name:</label>
            <input type="text" placeholder="Enter your name" class="form-control" name="guest[name]" required>
            <div class="valid-feedback"> looks good</div>
        </div>
        <div class="mt-3">
            <label for="" class="form-label">Number:</label>
            <input type="number" class="form-control" name="guest[number]" required id="number">
            <div class="invalid-feedback"> start with 7 8 or 9 & 10 digit number</div>
        </div>
        <div class="mt-3">
            <label for="" class="form-label">Address:</label>
            <textarea name="guest[address]" id="" class="form-control" required></textarea>
            <div class="invalid-feedback">Address is required</div>
        </div>
        <div class="mt-3">
            <label for="" class="form-label">Purpose:</label>
                <select name="guest[purpose]" class="form-control" id="" required>
                    <option value="Business">Business</option>
                    <option value="Personal">Personal</option>
                    <option value="Tourist">Tourist</option>
                </select>
            
        </div>
        <div class="mt-3">
            <label for="dates" class="form-label">Select Stay Dates</label>
            <input type="text" name="guest[dates]" id="dates" required >
            <div class="invalid-feedback" id="invalid-date">Date is required</div>
        </div>
        <div class="mt-3">
            <label for="" class="form-label">Email:</label>
            <input type="email" class="form-control" required placeholder="Enter your Email" name="guest[email]">
            <div class="invalid-feedback">Enter valid email</div>
        </div>
        <div class="mt-3">
            <label for="" class="form-label"> ID Proof:</label>
            <select name="guest[idProof]" class="form-control" id="">
                <option value="Aadhar Card">Aadhar Card</option>
                <option value="Pan Card">Pan Card</option>
                <option value="Passport">Passport</option>
            </select>
        </div>
        <div class="mt-3">
            <button class="btn btn-secondary">submit</button>
        </div>
    </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
         const today = new Date();
        const disabledDates = <%-JSON.stringify(allBookedDates)%>;
        console.log(disabledDates);
        // Get the date 60 days from today
        const maxDate = new Date(today);
        maxDate.setDate(today.getDate() + 60); // Adding 90 days

        // Format the date as YYYY-MM-DD for flatpickr
        const maxDateFormatted = maxDate.toISOString().split('T')[0];
        const todayFormatted = today.toISOString().split('T')[0];
          const datePicker = flatpickr("#dates", {
            mode: "multiple", // Enable multiple date selection
            dateFormat: "Y-m-d", // Format the selected dates as YYYY-MM-DD
            minDate: todayFormatted,
            maxDate: maxDateFormatted,
            disable:disabledDates,
//     
        });
 
    });
    </script>
</body>